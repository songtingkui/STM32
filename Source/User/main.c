/*********************************************************************************************************
* 模块名称：main.c
* 
* 摘    要：Main program body
* 
* 当前版本：1.0.0
* 
* 作    者：ZLGCX(COPYRIGHT 2021 - 2030 ZLGCX. All rights reserved.)
* 
* 完成日期：2021年05月11日 
* 
* 内    容：1、LED闪烁控制: PA2控制LED，低电平亮
*			
* 注    意：                                                                 
**********************************************************************************************************
* 取代版本：
* 
* 作    者： 
* 
* 完成日期：
* 
* 修改内容：
* 
* 修改文件：
*********************************************************************************************************/


/*********************************************************************************************************
*                                              包含头文件
*********************************************************************************************************/
#include "hk32f030m.h"
#include "delay.h"
#include "uart.h"
#include "pwm.h"
#include "blinker.h"
#include "03T.h"
#include "led.h"
#include "ADC.h"
#include "key.h"
#include "softUart.h"
/*********************************************************************************************************
*                                              宏定义
*********************************************************************************************************/

/*********************************************************************************************************
*                                              枚举结构体定义
*********************************************************************************************************/

/*********************************************************************************************************
*                                              内部变量
*********************************************************************************************************/
//uint16_t comCount = 0;
//uint8_t comBuffer[256];
//uint8_t ResaveSoft;
uint32_t g_u8ComRecvSoft;

/*********************************************************************************************************
*                                              内部函数声明
*********************************************************************************************************/



/*********************************************************************************************************
*                                              内部函数实现
*********************************************************************************************************/




/********************************************************************************************************/

/*********************************************************************************************************
*                                              API函数实现
*********************************************************************************************************/


/*********************************************************************************************************
* 函数名称：uint32_t main(void)
* 
* 函数功能：LED灯闪烁控制
* 
* 输入参数：None
* 输出参数：None
* 返 回 值：0
* 
* 创建日期：2021年05月10日
* 
* 注    意："system_hk32f030m.c" configures the system clock as follows:
* 
*=============================================================================
*                         Supported hk32f030m device
*-----------------------------------------------------------------------------
*        System Clock source                    | HSI32M
*-----------------------------------------------------------------------------
*        SYSCLK(Hz)                             | 32000000
*-----------------------------------------------------------------------------
*        HCLK(Hz)                               | 32000000
*-----------------------------------------------------------------------------
*        AHB Prescaler                          | 1
*-----------------------------------------------------------------------------
*        APB1 Prescaler                         | 1
*-----------------------------------------------------------------------------
*=============================================================================
*
* 修改记录：
*********************************************************************************************************/
int main(void)
{											
	SysTick_Initialize();														//Systick初始化
	TIM6_init();																//TIM6初始化
	Led_Initialize();															//Led初始化
	PWM_Initialize();															//PWM初始化
	Key_Initialize();															//Key初始化
	UART_Initialize();															//串口初始化
	BlinkerInitialize();														//Blinker初始化
//	ADC_Initialize();															//ADC初始化
	softUart_init(38400);
    // 工作死循环
	
    while (1)
    {	
		// Blinker协议处理
		BlinkerProcess();
		
		//
		
		//03T协议处理
		USART_AnalysisDate();
		
		//LED指示灯闪烁
		Ledshow(GPIOC, GPIO_Pin_3);
		
		//按键扫描
//		ScanKeyboard1();
//		ScanKeyboard2();
		
		//按键处理
//		sysKeyProcess();
		
		//睡眠模式扫描
//		Sleeping();
		
		//光敏扫描
//		Photosensitive();
	
    }
}



